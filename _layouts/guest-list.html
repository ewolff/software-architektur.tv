---
layout: default
---

<div class="guest-list-container">
  <!-- Page Header -->
  <header class="guest-list-header">
    <h1>{{ page.title | default: "G√§ste & Moderatoren von Software-Architektur.tv" }}</h1>
    {% if page.description %}
      <p class="guest-list-description">{{ page.description }}</p>
    {% endif %}
    <div class="stats-overview">
      <div class="stat-item">
        <span class="stat-number">{{ site.data.guests.guests.size }}</span>
        <span class="stat-label">G√§ste</span>
      </div>
      {% if site.data.guests.moderators %}
      <div class="stat-item">
        <span class="stat-number">{{ site.data.guests.moderators.size }}</span>
        <span class="stat-label">Moderatoren</span>
      </div>
      {% endif %}
      <div class="stat-item">
        <span class="stat-number">271</span>
        <span class="stat-label">Episoden</span>
      </div>
    </div>
  </header>

  <!-- Filter and Search Controls -->
  <div class="guest-controls">
    <div class="search-container">
      <input type="text" id="guest-search" placeholder="Person suchen..." class="search-input">
      <span class="search-icon">üîç</span>
    </div>
    
    <div class="filter-container">
      <select id="tag-filter" class="filter-select">
        <option value="">Alle Tags</option>
        <!-- Tags werden dynamisch gef√ºllt -->
      </select>
    </div>
    
    <div class="filter-container">
      <select id="type-filter" class="filter-select">
        <option value="">Alle Personen</option>
        <option value="guest">Nur G√§ste</option>
        <option value="moderator">Nur Moderatoren</option>
      </select>
    </div>
    
    <div class="sort-container">
      <select id="guest-sort" class="sort-select">
        <option value="name">Alphabetisch</option>
        <option value="episodes">Nach Auftritten</option>
        <option value="recent">Zuletzt aufgetreten</option>
      </select>
    </div>
    
    <div class="results-info">
      <span id="guest-count"></span>
    </div>
  </div>

  <!-- Moderators Section -->
  {% if site.data.guests.moderators %}
  <section class="moderators-section">
    <h2>Moderatoren & Co-Hosts</h2>
    <div class="moderator-grid">
      {% for moderator in site.data.guests.moderators %}
        <article class="guest-card moderator-card" 
                 data-name="{{ moderator.name | downcase }}"
                 data-tags="{{ moderator.tags | join: ',' | downcase }}"
                 data-episodes="{% if moderator.solo_episodes_count %}{{ moderator.solo_episodes_count | plus: moderator.episodes.size }}{% else %}{{ moderator.episodes.size }}{% endif %}"
                 data-recent="{{ moderator.episodes.last.date }}"
                 data-type="moderator">
          
          <!-- Moderator Avatar -->
          <div class="guest-avatar">
            <img src="{{ moderator.image }}" 
                 alt="{{ moderator.name }}" 
                 onerror="this.src='/images/avatar-placeholder.svg'">
            <div class="moderator-badge">üéôÔ∏è</div>
          </div>
          
          <!-- Moderator Info -->
          <div class="guest-info">
            <h3 class="guest-name">{{ moderator.name }}</h3>
            <p class="guest-role">{{ moderator.role }}</p>
            <p class="guest-bio">{{ moderator.bio }}</p>
            
            <!-- Tags -->
            <div class="guest-tags">
              {% for tag in moderator.tags limit:3 %}
                <span class="tag">{{ tag }}</span>
              {% endfor %}
            </div>
            
            <!-- Episode Stats -->
            <div class="episode-stats">
              {% if moderator.solo_episodes_count %}
                <span class="episode-count">{{ moderator.solo_episodes_count }} Solo + {{ moderator.episodes.size }} Co-Mod</span>
              {% else %}
                <span class="episode-count">{{ moderator.episodes.size }} Auftritte</span>
              {% endif %}
            </div>
          </div>
          
          <!-- Episodes List - Scrollable for many episodes -->
          <div class="episodes-section">
            <button class="episodes-toggle" onclick="toggleEpisodes(this)">
              <span class="toggle-text">Episoden anzeigen</span>
              <span class="toggle-icon">‚ñº</span>
            </button>
            
            <div class="episodes-list" style="display: none;">
              {% if moderator.solo_episodes_count %}
                <div class="episode-group">
                  <h4>Als Hauptmoderator</h4>
                  <p class="solo-episodes-note">{{ moderator.solo_episodes_count }} Solo-Episoden (Liste zu lang f√ºr Anzeige)</p>
                </div>
              {% endif %}
              
              {% if moderator.episodes.size > 0 %}
                <div class="episode-group">
                  <h4>Als Co-Moderator/Gast</h4>
                  <div class="episode-list-scrollable {% if moderator.episodes.size > 5 %}scrollable{% endif %}">
                    {% for episode in moderator.episodes %}
                      <div class="episode-item">
                        <a href="{{ episode.url }}" class="episode-link">
                          <div class="episode-header">
                            <span class="episode-title">{{ episode.title | truncate: 80 }}</span>
                            <span class="episode-date">{{ episode.date | date: "%d.%m.%Y" }}</span>
                          </div>
                        </a>
                      </div>
                    {% endfor %}
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
          
          <!-- Links -->
          <div class="guest-links">
            <a href="{{ moderator.linkedin }}" target="_blank" class="linkedin-link" title="LinkedIn Profil">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
          </div>
        </article>
      {% endfor %}
    </div>
  </section>
  {% endif %}

  <!-- Guests Section -->
  <section class="guests-section">
    <h2>G√§ste</h2>
    <div class="guest-grid" id="guest-grid">
      {% for guest in site.data.guests.guests %}
        <article class="guest-card" 
                 data-name="{{ guest.name | downcase }}"
                 data-tags="{{ guest.tags | join: ',' | downcase }}"
                 data-episodes="{{ guest.episodes.size }}"
                 data-recent="{{ guest.episodes.last.date }}"
                 data-type="guest">
          
          <!-- Guest Avatar -->
          <div class="guest-avatar">
            <img src="{{ guest.image }}" 
                 alt="{{ guest.name }}" 
                 onerror="this.src='/images/avatar-placeholder.svg'">
            {% if guest.episodes.size > 3 %}
              <div class="frequent-guest-badge">‚≠ê</div>
            {% endif %}
          </div>
          
          <!-- Guest Info -->
          <div class="guest-info">
            <h3 class="guest-name">{{ guest.name }}</h3>
            <p class="guest-bio">{{ guest.bio }}</p>
            
            <!-- Tags -->
            <div class="guest-tags">
              {% for tag in guest.tags limit:3 %}
                <span class="tag">{{ tag }}</span>
              {% endfor %}
            </div>
            
            <!-- Episode Count -->
            <div class="episode-stats">
              <span class="episode-count">{{ guest.episodes.size }} Episode{% if guest.episodes.size != 1 %}n{% endif %}</span>
            </div>
          </div>
          
          <!-- Episodes List -->
          <div class="episodes-section">
            <button class="episodes-toggle" onclick="toggleEpisodes(this)">
              <span class="toggle-text">Episoden anzeigen</span>
              <span class="toggle-icon">‚ñº</span>
            </button>
            
            <div class="episodes-list" style="display: none;">
              <div class="episode-list-scrollable {% if guest.episodes.size > 5 %}scrollable{% endif %}">
                {% for episode in guest.episodes %}
                  <div class="episode-item">
                    <a href="{{ episode.url }}" class="episode-link">
                      <div class="episode-header">
                        <span class="episode-title">{{ episode.title | truncate: 80 }}</span>
                        <span class="episode-date">{{ episode.date | date: "%d.%m.%Y" }}</span>
                      </div>
                    </a>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
          
          <!-- Links -->
          <div class="guest-links">
            <a href="{{ guest.linkedin }}" target="_blank" class="linkedin-link" title="LinkedIn Profil">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
          </div>
        </article>
      {% endfor %}
    </div>
  </section>
</div>

<!-- Enhanced JavaScript for filtering, searching and episode toggling -->
<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('guest-search');
  const tagFilter = document.getElementById('tag-filter');
  const typeFilter = document.getElementById('type-filter');
  const sortSelect = document.getElementById('guest-sort');
  const guestCards = document.querySelectorAll('.guest-card');
  const guestCount = document.getElementById('guest-count');
  
  // Collect all unique tags
  const allTags = new Set();
  guestCards.forEach(card => {
    const tags = card.dataset.tags.split(',').filter(tag => tag.trim());
    tags.forEach(tag => allTags.add(tag.trim()));
  });
  
  // Populate tag filter
  Array.from(allTags).sort().forEach(tag => {
    const option = document.createElement('option');
    option.value = tag;
    option.textContent = tag.charAt(0).toUpperCase() + tag.slice(1);
    tagFilter.appendChild(option);
  });
  
  function filterAndSort() {
    const searchTerm = searchInput.value.toLowerCase();
    const selectedTag = tagFilter.value.toLowerCase();
    const selectedType = typeFilter.value;
    const sortBy = sortSelect.value;
    
    let visibleCards = Array.from(guestCards).filter(card => {
      const name = card.dataset.name;
      const tags = card.dataset.tags;
      const type = card.dataset.type;
      
      const matchesSearch = name.includes(searchTerm);
      const matchesTag = !selectedTag || tags.includes(selectedTag);
      const matchesType = !selectedType || type === selectedType;
      
      return matchesSearch && matchesTag && matchesType;
    });
    
    // Sort visible cards
    visibleCards.sort((a, b) => {
      if (sortBy === 'episodes') {
        return parseInt(b.dataset.episodes) - parseInt(a.dataset.episodes);
      } else if (sortBy === 'recent') {
        return new Date(b.dataset.recent) - new Date(a.dataset.recent);
      } else {
        return a.dataset.name.localeCompare(b.dataset.name);
      }
    });
    
    // Hide all cards first
    guestCards.forEach(card => {
      card.style.display = 'none';
    });
    
    // Show and reorder visible cards
    const guestGrid = document.getElementById('guest-grid');
    const moderatorGrid = document.querySelector('.moderator-grid');
    
    visibleCards.forEach((card, index) => {
      card.style.display = '';
      if (card.dataset.type === 'moderator' && moderatorGrid) {
        moderatorGrid.appendChild(card);
      } else if (card.dataset.type === 'guest' && guestGrid) {
        guestGrid.appendChild(card);
      }
    });
    
    // Update count
    guestCount.textContent = `${visibleCards.length} Person${visibleCards.length !== 1 ? 'en' : ''} gefunden`;
  }
  
  // Event listeners
  searchInput.addEventListener('input', filterAndSort);
  tagFilter.addEventListener('change', filterAndSort);
  typeFilter.addEventListener('change', filterAndSort);
  sortSelect.addEventListener('change', filterAndSort);
  
  // Initial filter
  filterAndSort();
});

// Toggle episodes function
function toggleEpisodes(button) {
  const episodesList = button.nextElementSibling;
  const toggleIcon = button.querySelector('.toggle-icon');
  const toggleText = button.querySelector('.toggle-text');
  
  if (episodesList.style.display === 'none') {
    episodesList.style.display = 'block';
    toggleIcon.textContent = '‚ñ≤';
    toggleText.textContent = 'Episoden verbergen';
    button.classList.add('expanded');
  } else {
    episodesList.style.display = 'none';
    toggleIcon.textContent = '‚ñº';
    toggleText.textContent = 'Episoden anzeigen';
    button.classList.remove('expanded');
  }
}
</script>
